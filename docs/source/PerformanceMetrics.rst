Medical Image Segmentation Metrics
============================

The ``PerformanceMetrics`` module provides a comprehensive collection of medical image segmentation evaluation metrics.

This class implements both region-based and surface-based metrics commonly used in medical image analysis, including Dice coefficient, Jaccard index, Hausdorff distance, and more.

Class Reference
---------------

.. autoclass:: medsegevaluator.PerformanceMetrics
   :members:
   :undoc-members:
   :show-inheritance:
   :special-members: __init__

Available Metrics
-----------------

Region-Based Metrics
~~~~~~~~~~~~~~~~~~~~

+---------------------+---------------------------------------------------------------+--------------------------------+
| Metric              | Description                                                   | Method                         |
+=====================+===============================================================+================================+
| Dice Coefficient    | Measures overlap between predicted and ground truth masks    | ``dice_score()``               |
+---------------------+---------------------------------------------------------------+--------------------------------+
| Jaccard Index (IoU) | Intersection over Union                                      | ``jaccard_index()``            |
+---------------------+---------------------------------------------------------------+--------------------------------+
| Precision           | Positive predictive value (TP / (TP + FP))                   | ``precision()``                |
+---------------------+---------------------------------------------------------------+--------------------------------+
| Recall              | Sensitivity, true positive rate (TP / (TP + FN))             | ``recall()``                   |
+---------------------+---------------------------------------------------------------+--------------------------------+
| Specificity         | True negative rate (TN / (TN + FP))                          | ``specificity()``              |
+---------------------+---------------------------------------------------------------+--------------------------------+
| Accuracy            | Overall accuracy ((TP + TN) / Total)                         | ``accuracy()``                 |
+---------------------+---------------------------------------------------------------+--------------------------------+
| Intersection over   | Same as Jaccard index                                        | ``intersection_over_union()``  |
| Union               |                                                               |                                |
+---------------------+---------------------------------------------------------------+--------------------------------+

Surface-Based Metrics
~~~~~~~~~~~~~~~~~~~~~

+--------------------------+---------------------------------------------------------------+---------------------------------------+
| Metric                   | Description                                                   | Method                                |
+==========================+===============================================================+=======================================+
| Hausdorff Distance       | Maximum surface distance between two masks                    | ``hausdorff_distance()``              |
+--------------------------+---------------------------------------------------------------+---------------------------------------+
| HD95                     | 95th percentile Hausdorff distance                           | ``hd95()``                            |
+--------------------------+---------------------------------------------------------------+---------------------------------------+
| Average Surface Distance | Mean symmetric surface distance                              | ``average_surface_distance()``        |
+--------------------------+---------------------------------------------------------------+---------------------------------------+
| Normalized Surface Dice  | Surface similarity within tolerance                         | ``nsd()``                             |
| (NSD)                    |                                                               |                                       |
+--------------------------+---------------------------------------------------------------+---------------------------------------+

Volume-Based Metrics
~~~~~~~~~~~~~~~~~~~~

+----------------------------+---------------------------------------------------------------+---------------------------------------+
| Metric                     | Description                                                   | Method                                |
+============================+===============================================================+=======================================+
| Volumetric Similarity      | Volume agreement between masks                               | ``volumetric_similarity()``           |
+----------------------------+---------------------------------------------------------------+---------------------------------------+
| Relative Volume Difference | Relative difference in volumes                               | ``relative_volume_difference()``      |
+----------------------------+---------------------------------------------------------------+---------------------------------------+

Advanced Statistical Metrics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| Metric                         | Description                                                   | Method                                |
+================================+===============================================================+=======================================+
| Total Deviation Index (TDI)    | Quantifies deviation at specific percentile                  | ``total_deviation_index()``           |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| Concordance Correlation        | Measures agreement between continuous values                 | ``concordance_correlation_coefficient()`` |
| Coefficient (CCC)              |                                                               |                                       |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| Global Robustness Score (GRS)  | Combined metric integrating Dice, HD95, and CCC              | ``global_robustness_score()``         |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+

Utility Methods
~~~~~~~~~~~~~~~

+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| Method                         | Description                                                   | Returns                               |
+================================+===============================================================+=======================================+
| ``slice_level_dice()``         | Computes Dice coefficient per slice in 3D volume             | Per-slice Dice and summary statistics |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| ``dice_delta()``               | Computes change in Dice after perturbation                   | Dice drop value                       |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| ``dice_from_counts()``         | Computes Dice from TP, FP, FN counts                         | Dice coefficient                      |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| ``batch_evaluate()``           | Evaluates multiple image pairs                                | List of metric dictionaries           |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+
| ``print_summary()``            | Prints comprehensive summary of all metrics                  | Console output                        |
+--------------------------------+---------------------------------------------------------------+---------------------------------------+
